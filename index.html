<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AZASURE - Gift Card to Crypto & Gift Sending</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background-color: #FFFFFF; transition: background-color 0.3s; }
    body.dark { background-color: #1F2937; }
    .container { max-width: 800px; margin: 0 auto; padding: 16px; padding-bottom: 60px; }
    .title { font-size: 24px; color: #111827; margin-bottom: 24px; }
    .dark .title { color: #F3F4F6; }
    .description { color: #111827; margin-bottom: 24px; }
    .dark .description { color: #F3F4F6; }
    .input { border: 1px solid #1E40AF; border-radius: 8px; padding: 8px; margin-bottom: 16px; width: 100%; font-size: 16px; }
    .input.error { border-color: #DC2626; }
    .error { color: #DC2626; font-size: 14px; margin-bottom: 8px; }
    .button { background-color: #1E40AF; color: white; padding: 12px; border-radius: 8px; text-align: center; cursor: pointer; font-size: 16px; transition: transform 0.3s ease; }
    .button:hover { transform: scale(1.05); }
    .action-button { background-color: #059669; margin-right: 8px; }
    .delete-button { background-color: #DC2626; }
    .card { background-color: #FFFFFF; border: 1px solid #1E40AF; border-radius: 8px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease; }
    .dark .card { background-color: #1F2937; color: #F3F4F6; }
    .card:hover { transform: translateY(-5px); }
    .balance-container { background-color: #1E40AF; padding: 24px; border-radius: 8px; margin-bottom: 24px; }
    .balance { color: white; font-size: 24px; font-weight: bold; }
    .balance-label { color: white; opacity: 0.8; }
    .table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }
    .table th, .table td { border: 1px solid #1E40AF; padding: 8px; text-align: left; }
    .dark .table th, .dark .table td { border-color: #F3F4F6; color: #F3F4F6; }
    .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background-color: #FFFFFF; border-top: 1px solid #1E40AF; display: flex; justify-content: space-around; padding: 8px 0; }
    .dark .bottom-nav { background-color: #1F2937; }
    .nav-item { cursor: pointer; color: #1E40AF; font-size: 14px; text-align: center; }
    .nav-item.active { color: #059669; font-weight: bold; }
    .theme-toggle { position: absolute; top: 16px; right: 16px; cursor: pointer; }
    #three-canvas { width: 100%; height: 200px; margin-bottom: 16px; cursor: pointer; }
    .section { display: none; }
    .section.active { display: block; }
    @media (max-width: 600px) { .container { padding: 8px; } .title { font-size: 20px; } .table { font-size: 14px; } }
  </style>
</head>
<body>
  <div class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</div>
  <div class="container">
    <!-- Landing Page -->
    <div id="landing-section" class="section active">
      <h1 class="title">Welcome to AZASURE</h1>
      <p class="description">Trade gift cards for cryptocurrency or send gifts worldwide.</p>
      <div id="three-canvas"></div>
      <div class="button" onclick="showSection('login')">Get Started</div>
    </div>
    <!-- Login -->
    <div id="login-section" class="section">
      <h1 class="title">Login to AZASURE</h1>
      <input id="email" class="input" placeholder="Email" />
      <p id="email-error" class="error" style="display: none;"></p>
      <input id="password" class="input" type="password" placeholder="Password" />
      <p id="password-error" class="error" style="display: none;"></p>
      <div class="button" onclick="handleLogin()">Login</div>
    </div>
    <!-- Dashboard -->
    <div id="dashboard-section" class="section">
      <h1 class="title">Trading Dashboard</h1>
      <div id="dashboard-canvas"></div>
      <div class="card">
        <h3>Crypto Rates</h3>
        <p>BTC: $60,123.45</p>
        <p>ETH: $2,567.89</p>
        <div class="button" onclick="showSection('wallet')">View Wallet</div>
      </div>
      <div class="bottom-nav">
        <div class="nav-item active" onclick="showSection('dashboard')">Dashboard</div>
        <div class="nav-item" onclick="showSection('wallet')">Wallet</div>
        <div class="nav-item" onclick="showSection('kyc')">KYC</div>
        <div class="nav-item" onclick="showSection('gift')">Send Gift</div>
        <div class="nav-item" onclick="showSection('profile')">Profile</div>
      </div>
    </div>
    <!-- Wallet -->
    <div id="wallet-section" class="section">
      <h1 class="title">Wallet</h1>
      <div class="balance-container">
        <div class="balance">$1,234.56</div>
        <div class="balance-label">Total Balance</div>
      </div>
      <div id="transactions"></div>
      <div class="bottom-nav">
        <div class="nav-item" onclick="showSection('dashboard')">Dashboard</div>
        <div class="nav-item active" onclick="showSection('wallet')">Wallet</div>
        <div class="nav-item" onclick="showSection('kyc')">KYC</div>
        <div class="nav-item" onclick="showSection('gift')">Send Gift</div>
        <div class="nav-item" onclick="showSection('profile')">Profile</div>
      </div>
    </div>
    <!-- KYC -->
    <div id="kyc-section" class="section">
      <h1 class="title">KYC Verification</h1>
      <div class="card">
        <p>Upload your ID to verify your identity.</p>
        <input type="file" accept="image/*" class="input" onchange="handleKYCUpload(event)" />
        <div class="button" onclick="simulateKYC()">Submit</div>
      </div>
      <div class="bottom-nav">
        <div class="nav-item" onclick="showSection('dashboard')">Dashboard</div>
        <div class="nav-item" onclick="showSection('wallet')">Wallet</div>
        <div class="nav-item active" onclick="showSection('kyc')">KYC</div>
        <div class="nav-item" onclick="showSection('gift')">Send Gift</div>
        <div class="nav-item" onclick="showSection('profile')">Profile</div>
      </div>
    </div>
    <!-- Gift Sending -->
    <div id="gift-section" class="section">
      <h1 class="title">Send a Gift</h1>
      <div class="card">
        <h3>Gift Catalog</h3>
        <div id="gift-catalog"></div>
        <h3>Recipient Details</h3>
        <input id="recipient-name" class="input" placeholder="Recipient Name" />
        <input id="recipient-address" class="input" placeholder="Delivery Address" />
        <select id="payment-method" class="input">
          <option value="balance">Account Balance</option>
          <option value="crypto">Cryptocurrency</option>
          <option value="gift-card">Gift Card</option>
        </select>
        <div class="button" onclick="sendGift()">Send Gift</div>
      </div>
      <div class="bottom-nav">
        <div class="nav-item" onclick="showSection('dashboard')">Dashboard</div>
        <div class="nav-item" onclick="showSection('wallet')">Wallet</div>
        <div class="nav-item" onclick="showSection('kyc')">KYC</div>
        <div class="nav-item active" onclick="showSection('gift')">Send Gift</div>
        <div class="nav-item" onclick="showSection('profile')">Profile</div>
      </div>
    </div>
    <!-- Profile -->
    <div id="profile-section" class="section">
      <h1 class="title">Profile</h1>
      <div class="card">
        <p id="profile-email"></p>
        <p>2FA: Enabled</p>
        <p>Transaction PIN: Set</p>
        <div class="button delete-button" onclick="handleLogout()">Logout</div>
      </div>
      <div class="bottom-nav">
        <div class="nav-item" onclick="showSection('dashboard')">Dashboard</div>
        <div class="nav-item" onclick="showSection('wallet')">Wallet</div>
        <div class="nav-item" onclick="showSection('kyc')">KYC</div>
        <div class="nav-item" onclick="showSection('gift')">Send Gift</div>
        <div class="nav-item active" onclick="showSection('profile')">Profile</div>
      </div>
    </div>
    <!-- Admin Login -->
    <div id="admin-login-section" class="section">
      <h1 class="title">Admin Login</h1>
      <input id="admin-username" class="input" placeholder="Username" />
      <p id="admin-username-error" class="error" style="display: none;"></p>
      <input id="admin-password" class="input" type="password" placeholder="Password" />
      <p id="admin-password-error" class="error" style="display: none;"></p>
      <div class="button" onclick="handleAdminLogin()">Login</div>
    </div>
    <!-- Admin Dashboard -->
    <div id="admin-section" class="section">
      <h1 class="title">Admin Dashboard</h1>
      <div id="admin-canvas"></div>
      <h2>Users</h2>
      <table class="table" id="users-table">
        <thead><tr><th>ID</th><th>Email</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
      <h3>Add/Edit User</h3>
      <input id="user-email" class="input" placeholder="Email" />
      <input id="user-password" class="input" type="password" placeholder="Password" />
      <div class="button" onclick="addUser()">Add User</div>
      <div class="button delete-button" onclick="showSection('landing')">Back to Landing</div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script>
    // Simulated Backend Data
    const users = [{ id: 1, email: 'admin', password: 'admin111' }]; // Mock hashed password
    const giftCards = [];
    const transactions = [
      { id: 1, user_id: 2, type: 'Buy 0.005 BTC', amount: 300, date: '2025-08-08' },
      { id: 2, user_id: 2, type: 'Sell 0.1 ETH', amount: 256.79, date: '2025-08-07' }
    ];
    const giftOrders = [];
    const gifts = [
      { id: 1, name: 'Rose Bouquet', price: 50 },
      { id: 2, name: 'Greeting Card', price: 10 },
      { id: 3, name: 'Silver Necklace', price: 150 }
    ];
    let currentUser = null;
    let adminToken = null;
    let clickCount = 0;

    // Navigation
    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(`${sectionId}-section`).classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.querySelectorAll(`.nav-item[onclick="showSection('${sectionId}')"]`).forEach(n => n.classList.add('active'));
      if (sectionId === 'wallet') loadWallet();
      if (sectionId === 'gift') loadGiftCatalog();
      if (sectionId === 'profile') loadProfile();
      if (sectionId === 'admin') loadAdmin();
    }

    // Theme Toggle
    function toggleTheme() {
      document.body.classList.toggle('dark');
    }

    // Authentication
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function handleLogin() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      document.getElementById('email-error').style.display = 'none';
      document.getElementById('password-error').style.display = 'none';

      if (!email || !validateEmail(email)) {
        document.getElementById('email-error').textContent = 'Invalid email';
        document.getElementById('email-error').style.display = 'block';
        return;
      }
      if (!password || password.length < 8) {
        document.getElementById('password-error').textContent = 'Password must be at least 8 characters';
        document.getElementById('password-error').style.display = 'block';
        return;
      }
      currentUser = { id: users.length + 1, email };
      users.push({ id: currentUser.id, email, password });
      localStorage.setItem('user', JSON.stringify(currentUser));
      showSection('dashboard');
    }

    function handleLogout() {
      currentUser = null;
      localStorage.removeItem('user');
      showSection('landing');
    }

    // KYC
    function handleKYCUpload(event) {
      const file = event.target.files[0];
      if (file) console.log('KYC File:', file.name);
    }

    function simulateKYC() {
      setTimeout(() => alert('KYC Simulation: ID verified!'), 1000);
    }

    // Wallet
    function loadWallet() {
      if (!currentUser) return showSection('login');
      const container = document.getElementById('transactions');
      container.innerHTML = '';
      transactions
        .filter(t => t.user_id === currentUser.id)
        .forEach(t => {
          container.innerHTML += `
            <div class="card">
              <div class="transaction-text">${t.type}</div>
              <div class="transaction-date">${t.date}</div>
            </div>
          `;
        });
    }

    // Gift Sending
    function loadGiftCatalog() {
      const catalog = document.getElementById('gift-catalog');
      catalog.innerHTML = gifts.map(g => `
        <div class="card" onclick="selectGift(${g.id})">
          <p>${g.name} - $${g.price}</p>
        </div>
      `).join('');
    }

    function selectGift(giftId) {
      const selectedGift = gifts.find(g => g.id === giftId);
      document.getElementById('recipient-name').value = '';
      document.getElementById('recipient-address').value = '';
      alert(`Selected: ${selectedGift.name} ($${selectedGift.price})`);
    }

    function sendGift() {
      const name = document.getElementById('recipient-name').value;
      const address = document.getElementById('recipient-address').value;
      const payment = document.getElementById('payment-method').value;
      if (!name || !address) return alert('Please fill all fields');
      const giftOrder = { id: giftOrders.length + 1, user_id: currentUser.id, gift_name: 'Rose Bouquet', recipient: name, address, status: 'Ordered' };
      giftOrders.push(giftOrder);
      transactions.push({ id: transactions.length + 1, user_id: currentUser.id, type: `Sent ${giftOrder.gift_name}`, amount: 50, date: '2025-08-08' });
      dispatchUpdate('gift_orders');
      alert('Gift sent! Tracking: AZGIFT' + giftOrder.id);
      showSection('wallet');
    }

    // Profile
    function loadProfile() {
      if (!currentUser) return showSection('login');
      document.getElementById('profile-email').textContent = `Email: ${currentUser.email}`;
    }

    // Admin Access
    function handleLogoClick() {
      clickCount++;
      if (clickCount === 3) {
        clickCount = 0;
        showSection('admin-login');
      }
    }

    function handleAdminLogin() {
      const username = document.getElementById('admin-username').value;
      const password = document.getElementById('admin-password').value;
      document.getElementById('admin-username-error').style.display = 'none';
      document.getElementById('admin-password-error').style.display = 'none';

      if (username === 'admin' && password === 'admin111') {
        adminToken = 'mock-jwt-admin';
        showSection('admin');
      } else {
        document.getElementById('admin-username-error').textContent = 'Invalid credentials';
        document.getElementById('admin-username-error').style.display = 'block';
      }
    }

    // Admin CRUD
    function loadAdmin() {
      if (!adminToken) return showSection('admin-login');
      const tbody = document.getElementById('users-table').querySelector('tbody');
      tbody.innerHTML = '';
      users.forEach(user => {
        tbody.innerHTML += `
          <tr>
            <td>${user.id}</td>
            <td>${user.email}</td>
            <td>
              <div class="button action-button" onclick="editUser(${user.id}, '${user.email}')">Edit</div>
              <div class="button delete-button" onclick="deleteUser(${user.id})">Delete</div>
            </td>
          </tr>
        `;
      });
    }

    function addUser() {
      const email = document.getElementById('user-email').value;
      const password = document.getElementById('user-password').value;
      if (!email || !password) return alert('Fill all fields');
      users.push({ id: users.length + 1, email, password });
      dispatchUpdate('users');
      loadAdmin();
    }

    function editUser(id, email) {
      const newEmail = prompt('Enter new email', email);
      const newPassword = prompt('Enter new password');
      if (newEmail && newPassword) {
        const user = users.find(u => u.id === id);
        user.email = newEmail;
        user.password = newPassword;
        dispatchUpdate('users');
        loadAdmin();
      }
    }

    function deleteUser(id) {
      if (confirm('Delete user?')) {
        const index = users.findIndex(u => u.id === id);
        users.splice(index, 1);
        dispatchUpdate('users');
        loadAdmin();
      }
    }

    // Real-Time Updates
    function dispatchUpdate(type) {
      if (type === 'users' || type === 'gift_orders') {
        if (currentUser && document.getElementById('wallet-section').classList.contains('active')) {
          loadWallet();
        }
      }
    }

    // Three.js Animations
    function initThreeJS(canvasId, shape) {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / 200, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, 200);
      document.getElementById(canvasId).appendChild(renderer.domElement);
      const geometry = shape === 'coin' ? new THREE.CylinderGeometry(2, 2, 0.2, 32) : new THREE.BoxGeometry(1, 1, 1);
      const material = new THREE.MeshStandardMaterial({ color: 0x059669 });
      const mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);
      const light = new THREE.PointLight(0xffffff, 1, 100);
      light.position.set(5, 5, 5);
      scene.add(light);
      camera.position.z = 5;
      function animate() {
        requestAnimationFrame(animate);
        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();
      window.addEventListener('resize', () => {
        renderer.setSize(window.innerWidth, 200);
        camera.aspect = window.innerWidth / 200;
        camera.updateProjectionMatrix();
      });
      if (canvasId === 'three-canvas') {
        document.getElementById(canvasId).addEventListener('click', handleLogoClick);
      }
    }

    // Initialize
    initThreeJS('three-canvas', 'coin');
    initThreeJS('dashboard-canvas', 'cube');
    initThreeJS('admin-canvas', 'cube');
    if (localStorage.getItem('user')) {
      currentUser = JSON.parse(localStorage.getItem('user'));
      showSection('dashboard');
    }
  </script>
</body>
</html>
